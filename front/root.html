<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <title>Scart</title>
    <link rel="stylesheet" href="/style.css">
</head>

<body>

<div id="app">
    <router-view></router-view>
</div>

<script src="https://unpkg.com/vue"></script>
<script src="https://unpkg.com/vue-router"></script>

<script type="module">
    import {student} from '/components/student.js';
    import {teacher} from '/components/teacher.js';
    import {course} from '/components/course.js';
    import {authorization} from "/components/authorization.js";



    const routes = [
        {
            path: '/',
            component: authorization
        }, {
            path: '/student/:id',
            component: student
        }, {
            path: '/teacher/:id',
            component: teacher
        }, {
            path: '/course/:id',
            component: course
        }
    ];

    const router = VueRouter.createRouter({
        history: VueRouter.createWebHistory(),
        routes,
    });

    const app = Vue.createApp({
        data() {
            return {

            }
        },
        methods: {
            autoLogIn() {
                console.log('Вход в метод autoLogIn')
                if (sessionStorage.logged !== '1' && localStorage.logged === '1') {
                    sessionStorage.logged = '1';
                    sessionStorage.id = localStorage.id;
                    sessionStorage.role = localStorage.role;
                    window.location.pathname = `/${localStorage.role}/${localStorage.id}`;
                }
            }
        }
    });


    app.use(router);
    app.mount('body');
</script>

</body>
</html>